{"version":3,"sources":["API.js","components/PopupSettings.js","components/LogEntryForm.js","components/OurPopup.js","components/OurMarker.js","App.js","index.js"],"names":["API_URL","listLogEntries","a","fetch","response","json","createLogEntry","entry","method","headers","body","JSON","stringify","deleteLogEntry","PopupSettings","onDelete","setShowSettings","useState","error","setError","onSubmit","console","className","onClick","_id","LogEntryForm","location","onClose","getEntries","loading","setLoading","useForm","register","handleSubmit","data","latitude","longitude","message","htmlFor","name","required","ref","rows","type","disabled","OurPopup","newMarker","setShowPopup","setNewMarker","showSettings","close","closeButton","closeOnClick","dynamicPosition","anchor","src","title","Date","visitDate","toLocaleDateString","toFixed","rating","style","width","image","description","comments","alt","OurMarker","viewport","showPopup","height","zoom","App","logEntries","setLogEntries","minZoom","setViewport","useEffect","mapStyle","mapboxApiAccessToken","onDblClick","event","lngLat","onViewportChange","nextViewport","map","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9989769d.chunk.js","sourcesContent":["\r\nconst API_URL = 'http://localhost:5000';\r\n// This is what talks to the backend\r\nexport async function listLogEntries(){  \r\n    const response = await fetch(`${API_URL}/`);\r\n    return response.json();\r\n}\r\n\r\nexport async function createLogEntry(entry){  \r\n    const response = await fetch(`${API_URL}/`,{\r\n        method: 'POST',\r\n        headers:{\r\n            'content-type': 'application/json',\r\n\r\n        },\r\n        body: JSON.stringify(entry),\r\n    });\r\n    return response.json();\r\n}\r\n\r\nexport async function deleteLogEntry(entry){\r\n    const response = await fetch(`${API_URL}/`,{\r\n        method: 'DELETE',\r\n        headers:{\r\n            'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify(entry),\r\n    });\r\n    return response.json();\r\n}","import React ,{ useState }from 'react';\r\nimport {deleteLogEntry} from  '../API';\r\nimport '../styles/popup.css'\r\nconst PopupSettings = ({entry, onDelete, setShowSettings}) =>{\r\n    const [error, setError] = useState('');\r\n    const onSubmit = async () => {\r\n        try{\r\n            await(deleteLogEntry(entry));\r\n            onDelete();\r\n\r\n        }catch(error){  \r\n            console.error(error);\r\n            setError(error);\r\n        }\r\n        \r\n    }\r\n    return(\r\n        <div className=\"settings-overlay\">\r\n            {error ? <div className=\"error-text\">{error}</div> : null}\r\n            <div className=\"close-button-wrapper\">\r\n                <div className=\"close-button\" onClick={() => { setShowSettings({ [entry._id]: false}); }} >x</div>\r\n            </div>\r\n            <div className = \"overlay-buttons\">\r\n                    <button className=\"deleteButton\" onClick={onSubmit}>Delete</button>\r\n                    <button className=\"update-button\">Update</button>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\nexport default PopupSettings","import React ,{ useState }from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport {createLogEntry} from '../API';\r\nconst LogEntryForm = ({location, onClose, getEntries}) =>{\r\n      const [loading, setLoading] = useState(false);\r\n      const [error, setError] = useState('');\r\n      const { register, handleSubmit} = useForm();\r\n      const onSubmit = async (data) =>{\r\n          try{\r\n              setLoading(true);\r\n\r\n              data.latitude = location[0];\r\n              data.longitude = location[1];\r\n              await createLogEntry(data);\r\n              onClose();\r\n              getEntries();\r\n          }catch(error){\r\n              console.error(error);\r\n              setError(error.message);\r\n              setLoading(false);\r\n          }\r\n      };\r\n    return(\r\n        <form onSubmit={handleSubmit(onSubmit)} className=\"entry-form\">\r\n            {error ? <h3 className = \"error-text\">{error}</h3> : null}\r\n            <label htmlFor=\"title\">Title</label>\r\n            <input name=\"title\" required ref={register}/>\r\n            <label htmlFor=\"comments\">Comments</label>\r\n            <textarea name=\"comments\" rows ={3} ref={register}/>\r\n            <label htmlFor=\"description\">Description</label>\r\n            <textarea name=\"description\" rows={3} ref={register}/>\r\n            <label htmlFor=\"image\">Image URL</label>\r\n            <input name=\"image\" ref={register}/>\r\n            <label htmlFor=\"visitDate\">Visit Date</label>\r\n            <input name=\"visitDate\" type=\"date\" required ref={register}/>\r\n            <button disabled = {loading}>{loading ? 'Loading...' : 'Create Entry'}</button>\r\n        </form>\r\n    );\r\n\r\n}\r\n\r\nexport default LogEntryForm;","import * as React from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport PopupSettings from './PopupSettings';\r\nimport  { Popup } from 'react-map-gl';\r\nimport LogEntryForm from './LogEntryForm';\r\nimport '../styles/popup.css'\r\n const OurPopup = ({entry, newMarker, setShowPopup, location, setNewMarker, getEntries}) => {\r\n    const [showSettings, setShowSettings] = useState({});\r\n    const close = ()=>{\r\n            setShowPopup({});\r\n            setNewMarker(null);\r\n\r\n    }\r\n    const onDelete = () =>{\r\n        close();\r\n        getEntries();\r\n    }\r\n    return(\r\n        entry || newMarker ?\r\n        ( \r\n            <Popup\r\n                className=\"popup\"\r\n                latitude={location[0]}\r\n                longitude={location[1]}\r\n                closeButton={true}\r\n                closeOnClick={false}\r\n                dynamicPosition={false}\r\n                onClose={()=>{\r\n                    newMarker ? setNewMarker(null) : setShowPopup({});\r\n                    }}\r\n                anchor=\"top\"\r\n\r\n            >\r\n                {newMarker ?\r\n                    <div className=\"popup-content-wrapper\">\r\n                        <div className=\"popup-form\">\r\n                            <LogEntryForm\r\n                                onClose = {close}\r\n                                location={location}\r\n                                getEntries={getEntries}/>\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    (\r\n                    <div className=\"popup-container\">\r\n                        {showSettings[entry._id] ? \r\n                            <PopupSettings \r\n                             entry={entry}\r\n                             onDelete={onDelete}\r\n                             setShowSettings={setShowSettings}\r\n                            />\r\n                                : null}\r\n                        <div className=\"settings-button-wrapper\">\r\n                        <img className=\"settings-button\" \r\n                        onClick={() => { setShowSettings({ [entry._id]: true}); } }\r\n                        src=\"https://img.icons8.com/material-outlined/24/000000/settings--v1.png\"/>\r\n                        </div>\r\n\r\n                        <div className=\"popup-content-wrapper\">\r\n                            <div className=\"popup-title\">{entry.title}</div>\r\n                            <div className=\"popup-heading\">\r\n                                <div className=\"visited-wrapper\">\r\n                                        <div className=\"popup-visited\">Visited On: {new Date(entry.visitDate).toLocaleDateString()}</div>\r\n                                </div>\r\n                                <div className=\"location-wrapper\">\r\n                                    <div className=\"latitude\">({entry.latitude.toFixed(8)},</div> &ensp;\r\n                                    <div className=\"longitude\">{entry.longitude.toFixed(8)})</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"popup-info\">\r\n                                <div className = \"rating-wrapper\">\r\n                                    {entry.rating ?  <div className=\"rating\">Rating: {entry.rating} / 10.0</div>: null}\r\n                                </div>\r\n                                <div className=\"popup-columns\">\r\n                                    <div className=\"popup-left-side\" style={{\r\n                                        width: entry.image ? '45% ': '100%'\r\n                                    }}>\r\n                                        <div className=\"description-wrapper\">\r\n                                            {entry.description ? <div className=\"popup-description\">Description: <br/>{entry.description}</div> : null}\r\n                                        </div>\r\n                                        <div className=\"comments-wrapper\">\r\n                                            {entry.comments ? <div className=\"popup-comments\">Comments: <br/>{entry.comments}</div> : null} \r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"popup-right-side\" style={{\r\n                                        width: entry.comments || entry.comments ? '55%' : '100%'\r\n                                    }}>\r\n                                        <div className=\"image-wrapper\">\r\n                                            {entry.image ? <img className=\"popup-image\" src={entry.image} alt={entry.title}/> : null}\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    )\r\n                }  \r\n\r\n            </Popup>\r\n        ):null\r\n    )\r\n}\r\nexport default OurPopup;","import * as React from 'react';\r\nimport {useState} from 'react';\r\nimport {Marker} from 'react-map-gl';\r\nimport OurPopup from './OurPopup';\r\nimport '../styles/marker.css';\r\nconst OurMarker = ({ entry, newMarker, viewport, setNewMarker, getEntries })  => {\r\n    const [showPopup, setShowPopup] = useState({});\r\n    var latitude = newMarker ? newMarker.latitude : entry.latitude;\r\n    var longitude = newMarker ? newMarker.longitude : entry.longitude;\r\n    const location = [latitude, longitude];\r\n    return (\r\n        <div\r\n            onClick={() => { setShowPopup({ [entry._id]: true }); } }\r\n        >\r\n            {entry || newMarker ?\r\n                (\r\n                    <div>\r\n                        <Marker\r\n                            latitude={location[0]}\r\n                            longitude={location[1]}\r\n\r\n                        >\r\n                            <div>\r\n                                <img\r\n                                    className=\"marker\"\r\n                                    style={{\r\n                                        height: `${viewport.zoom * 6}px`,\r\n                                        width: `${viewport.zoom * 6}px`\r\n                                    }}\r\n                                    src=\"https://i.imgur.com/y0G5YTX.png\"\r\n                                    alt=\"marker\">\r\n\r\n                                </img>\r\n\r\n                            </div>\r\n                        </Marker>\r\n                        {newMarker || showPopup[entry._id] ?\r\n                            <OurPopup\r\n                                entry={entry}\r\n                                newMarker={newMarker}\r\n                                setNewMarker={setNewMarker}\r\n                                setShowPopup={setShowPopup}\r\n                                location={location}\r\n                                getEntries={getEntries} />\r\n\r\n                            : null}\r\n                    </div>)\r\n\r\n                :\r\n                null}\r\n        </div>\r\n\r\n    );\r\n\r\n}\r\nexport default OurMarker;","import * as React  from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport ReactMapGL from 'react-map-gl';\r\nimport { listLogEntries } from './API';\r\nimport OurMarker from './components/OurMarker';\r\n\r\n\r\nconst App = () => {\r\n  const [logEntries, setLogEntries] = useState([]);\r\n  const [newMarker, setNewMarker] = useState(null);\r\n  const [viewport, setViewport] = useState({\r\n    width: '100vw',\r\n    height: '100vh',\r\n    latitude: 30,\r\n    longitude: 0,\r\n    zoom: 2.5,\r\n    minZoom: 1.5,\r\n  });\r\n  const getEntries = async () => {\r\n      const logEntries = await listLogEntries();\r\n      setLogEntries(logEntries);\r\n  }\r\n\r\n  useEffect(() =>{\r\n    getEntries();\r\n  }, []);\r\n\r\n  const showNewMarkerPopup = (event) =>{\r\n    const [longitude, latitude] = event.lngLat;\r\n    setNewMarker({\r\n      longitude,\r\n      latitude,\r\n    })\r\n  }\r\n  return (\r\n    <ReactMapGL\r\n      {...viewport}\r\n      mapStyle=\"mapbox://styles/himanshubiradar/ckhxn18e70un219qlwhq05q5i\"\r\n      mapboxApiAccessToken={'pk.eyJ1IjoiaGltYW5zaHViaXJhZGFyIiwiYSI6ImNraHdyOHNzNTBvYmwyem1vb25tb2djN28ifQ.JWbSVKNAURjCCp2In5jaXQ'}\r\n      onDblClick={showNewMarkerPopup}\r\n      onViewportChange={nextViewport => setViewport(nextViewport)}\r\n    >\r\n    {\r\n      logEntries.map(entry =>{\r\n        return(\r\n          <div key={entry._id}>\r\n            <OurMarker entry={entry} viewport={viewport} newMarker = {newMarker} setNewMarker ={setNewMarker} getEntries={getEntries}/>\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n    </ReactMapGL>\r\n  );\r\n}\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './styles/index.css';\r\n\r\nReactDOM.render( < App /> , document.getElementById('root'));\r\n"],"sourceRoot":""}